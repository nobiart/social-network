import{r,j as t,P as g,u as m,F as _,a as C,T as v,m as S,c as h,d as p,e as b,R as k,f as I,g as T,h as N,i as w,k as M,l as E}from"./index-C4Dr-cz8.js";import{w as x}from"./WithAuthRedirect-DRWE7841.js";const F="_mainImage_2f71r_1",R="_infoContainer_2f71r_7",A="_userImage_2f71r_11",d={mainImage:F,infoContainer:R,userImage:A},y=s=>{const[e,a]=r.useState(!1),[o,n]=r.useState(s.status);r.useEffect(()=>{n(s.status)},[s.status]);const i=()=>{a(!0)},P=()=>{a(!1),s.updateStatus(o)},j=f=>{var c;n((c=f.target)==null?void 0:c.value)};return t.jsx("div",{children:e?t.jsx("div",{children:t.jsx("input",{type:"text",onChange:j,onBlur:P,value:o,autoFocus:!0})}):t.jsx("div",{children:t.jsx("span",{onDoubleClick:i,"data-testid":"status",children:o.length>0?o:"No Status"})})})},L=({profile:s,status:e,updateStatus:a})=>{var o;return s?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:s.fullName}),t.jsxs("div",{className:d.infoContainer,children:[t.jsx("img",{className:d.userImage,src:((o=s==null?void 0:s.photos)==null?void 0:o.small)??m,alt:""}),t.jsx(y,{status:e,updateStatus:a})]})]}):t.jsx(g,{})},$="_container_u1ev6_1",D="_submit_u1ev6_5",W="_posts_u1ev6_9",u={container:$,submit:D,posts:W},B="_item_6j11e_1",H="_userPic_6j11e_5",l={item:B,userPic:H},V=({message:s,likes:e})=>t.jsxs("div",{className:l.item,children:[t.jsx("img",{className:l.userPic,src:m,alt:""}),s,t.jsxs("div",{children:["Like",t.jsx("span",{children:e})]})]}),q=s=>{const e=S(10);return t.jsx(_,{initialValues:{newPost:""},onSubmit:(a,{setSubmitting:o})=>{console.log(a.newPost),s.onSubmit(a.newPost),o(!1),a.newPost=""},children:({values:a,handleSubmit:o,handleChange:n})=>t.jsxs(C,{onSubmit:o,children:[t.jsx("div",{children:t.jsx(v,{label:"Message",name:"newPost",type:"textarea",value:a.newPost,onChange:n,validate:e})}),t.jsx("button",{type:"submit",className:u.submit,children:"Add New Post"})]})})},z=r.memo(s=>t.jsxs("div",{className:u.container,children:[t.jsx("h3",{children:"My Posts"}),t.jsx(q,{onSubmit:s.addPost}),t.jsx("div",{className:u.posts,children:s.posts.map(e=>t.jsx(V,{...e},e.id))})]})),G=s=>({posts:s.profilePage.posts}),J=s=>({addPost:e=>{s(b(e))}}),K=h(p(G,J),x)(z),O=({profile:s,status:e,updateStatus:a})=>t.jsxs("div",{children:[t.jsx(L,{profile:s,status:e,updateStatus:a}),t.jsx(K,{})]});class Q extends k.Component{componentDidMount(){const e=this.props.router.params.userId??this.props.userId;this.props.getProfileThunkCreator(e),this.props.getStatusThunkCreator(e),this.props.updateStatusThunkCreator(this.props.status)}render(){return t.jsx(O,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatusThunkCreator})}}const U=s=>({profile:s.profilePage.profile,status:s.profilePage.status,userId:s.auth.id});function X(s){function e(a){let o=I(),n=T(),i=N();return t.jsx(s,{...a,router:{location:o,navigate:n,params:i}})}return e}const tt=h(p(U,{getProfileThunkCreator:w,getStatusThunkCreator:M,updateStatusThunkCreator:E}),X,x)(Q);export{tt as ProfileContainer};
